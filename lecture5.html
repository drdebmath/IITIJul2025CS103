<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Lecture 5: Loops (C++)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Reveal.js Core CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.css">
  <!-- Theme -->
  <link id="theme-link" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/theme/dracula.css">
  <!-- Syntax Highlighting -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/monokai.css">
  <!-- KaTeX for Math -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
</head>
<body>
  <button id="theme-toggle" style="position:fixed;top:10px;right:10px;z-index:999;cursor:pointer;padding:8px 12px;font-size:1rem;border-radius:5px;">Change Theme</button>

  <div class="reveal">
    <div class="slides">

      <!-- Title Slide -->
      <section data-markdown>
        <textarea data-template>
          # Control Flow
          ### Lecture 5: Loops
          
          Repetition is Power
        </textarea>
      </section>

    <!-- Gauss and Computers Slide -->
    <section data-markdown>
        <textarea data-template>
            ## If Gauss Had a Computer...

            **Legend:** Young Gauss famously summed the numbers 1 to 100 quickly by spotting a pattern.

            **With a computer:**  
            Gauss could use a loop to sum any series, no matter how large!

            ```cpp
            // Sum numbers from 1 to N using a loop
            int N = 100;
            int sum = 0;
            for (int i = 1; i <= N; ++i) {
                    sum += i;
            }
            std::cout << "Sum is " << sum << std::endl;
            ```

            *Computers make brute-force summation easy, but Gauss's insight is still valuable!*
        </textarea>
    </section>

      <!-- Why Loops? -->
      <section>
        <h2>Why Do We Need Loops?</h2>
        <p>Computers excel at performing repetitive tasks without getting bored. Loops are the primary way we tell them to do so.</p>
        <p class="fragment"><strong>Key Uses:</strong></p>
        <ul>
          <li class="fragment">Processing collections of data (arrays, lists, etc.)</li>
          <li class="fragment">Running simulations that evolve over time</li>
          <li class="fragment">Repeating a task until a specific condition is met</li>
          <li class="fragment">Implementing algorithms that require iteration</li>
        </ul>
      </section>

      <!-- The 'while' Loop -->
      <section>
        <h2>The <code>while</code> Loop</h2>
        <p>The most fundamental loop. It repeats a block of code <strong>as long as a condition is true</strong>.</p>
        <pre><code class="language-cpp" data-trim data-noescape>
          while (condition) {
              // Code to execute
              // ...
              // Something inside the loop should
              // eventually make the condition false!
          }
        </code></pre>
        <p class="fragment">The condition is checked <strong>before</strong> each iteration. If it's false the first time, the loop body never runs.</p>
      </section>

      <!-- Math Example (while) - Theory -->
      <section>
        <h2>Math Example: Approximating π</h2>
        <p><strong>Problem:</strong> Calculate π using the Leibniz formula.</p>
        <p><strong>The Series:</strong></p>
        \[ \frac{\pi}{4} = 1 - \frac{1}{3} + \frac{1}{5} - \frac{1}{7} + \frac{1}{9} - \dots \]
        <p class="fragment"><strong>Logic:</strong> We don't know how many terms we need. We'll use a <code>while</code> loop to keep adding terms until the term we're adding is very small (i.e., it doesn't change the result much). This is an ideal use case for a <code>while</code> loop.</p>
      </section>
      
      <!-- Math Example (while) - Code -->
      <section data-markdown>
        <textarea data-template>
          ## Approximating π: Code
          
          ```cpp
          #include <iostream>
          #include <cmath>
          #include <iomanip>

          int main() {
              double pi_over_4 = 0.0;
              double term;
              int i = 0;
              const double TOLERANCE = 1e-7;

              do {
                  double denominator = 2 * i + 1;
                  term = 1.0 / denominator;
                  if (i % 2 != 0) { // If i is odd
                      term = -term;
                  }
                  pi_over_4 += term;
                  i++;
              } while (std::abs(term) > TOLERANCE);
              
              std::cout << "Approximate pi: " << std::fixed 
                        << std::setprecision(8) << pi_over_4 * 4 << std::endl;
              return 0;
          }
          ```
          *Note: This example uses a `do-while` to ensure at least one term is calculated, but the logic is the same: loop until a condition is met.*
        </textarea>
      </section>
      
      <!-- The 'for' Loops -->
      <section>
        <h2>The <code>for</code> Loop</h2>
        <p>The "counting loop". Perfect for when you know how many times you want to iterate.</p>
        <pre><code class="language-cpp" data-trim data-noescape>
          for (initialization; condition; increment) {
              // Code to execute
          }
        </code></pre>
        <div class="fragment">1. <strong>initialization:</strong> Runs once at the very beginning.</div>
        <div class="fragment">2. <strong>condition:</strong> Checked <em>before</em> each iteration.</div>
        <div class="fragment">3. <strong>increment:</strong> Runs at the <em>end</em> of each iteration.</div>
      </section>

      <!-- EE Example (for) - Theory -->
      <section>
        <h2>EE Example: RMS Voltage</h2>
        <p><strong>Problem:</strong> Calculate the Root Mean Square (RMS) voltage from N discrete samples. RMS value is the "effective" voltage of a varying signal.</p>
        <p><strong>Formula:</strong></p>
        \[ V_{rms} = \sqrt{\frac{1}{N}\sum_{i=1}^{N} v_i^2} \]
        <p class="fragment"><strong>Logic:</strong> We need to sum the squares of <code>N</code> voltage samples. A <code>for</code> loop is perfect because we have a fixed number of samples to process.</p>
      </section>

      <!-- EE Example (for) - Code -->
      <section data-markdown>
        <textarea data-template>
          ## RMS Voltage: Code
          
          ```cpp
          #include <iostream>
          #include <vector>
          #include <cmath>

          int main() {
              std::vector<double> samples = {1.2, -2.5, 3.0, -1.8, 2.2};
              double sum_of_squares = 0.0;
              
              // A for loop is perfect for iterating over a known number of items
              for (int i = 0; i < samples.size(); ++i) {
                  sum_of_squares += samples[i] * samples[i];
              }
              
              double mean_square = sum_of_squares / samples.size();
              double v_rms = std::sqrt(mean_square);
              
              std::cout << "RMS Voltage: " << v_rms << " V" << std::endl;
              
              return 0;
          }
          ```
        </textarea>
      </section>
      
      <!-- The 'do-while' Loop -->
      <section>
        <h2>The <code>do-while</code> Loop</h2>
        <p>The "execute at least once" loop. The condition is checked <strong>after</strong> the loop body runs.</p>
        <pre><code class="language-cpp" data-trim data-noescape>
          do {
              // This code always runs at least once
          } while (condition); // Note the semicolon!
        </code></pre>
        <p class="fragment"><strong>Key Use Case:</strong> Input validation. You need to get the input <em>first</em>, then check if it's valid.</p>
      </section>
      
      <!-- Civil Eng Example (do-while) - Theory -->
      <section>
        <h2>Civil Eng: Input Validation</h2>
        <p><strong>Problem:</strong> Designing a concrete beam. The height <code>h</code> must be a positive, non-zero value.</p>
        <p><strong>Logic:</strong></p>
        <ol>
          <li>Prompt the user to enter the beam height.</li>
          <li>Read the value.</li>
          <li><strong>Check if the value is valid.</strong></li>
          <li>If it's not valid, go back to step 1.</li>
        </ol>
        <p class="fragment">A <code>do-while</code> loop guarantees the prompt happens at least once, and repeats only if the input is bad.</p>
      </section>
      
      <!-- Civil Eng Example (do-while) - Code -->
      <section data-markdown>
        <textarea data-template>
          ## Input Validation: Code
          
          ```cpp
          #include <iostream>
          
          int main() {
              double beam_height;
              
              do {
                  std::cout << "Enter the beam height in meters (must be > 0): ";
                  std::cin >> beam_height;
                  
                  if (beam_height <= 0) {
                      std::cout << "Invalid input. Please try again." << std::endl;
                  }
                  
              } while (beam_height <= 0);
              
              std::cout << "Beam height set to " << beam_height << " m." << std::endl;
              
              return 0;
          }
          ```
        </textarea>
      </section>
      
      <!-- Space Science Example - Theory -->
      <section data-markdown>
        <textarea data-template>
          ## Space Science: Launch Countdown
          
          **Problem:** Simulate a rocket launch countdown sequence.
          
          **Logic:**
          - Count down from 10 to 0. A `for` loop is great for this.
          - At specific times, display a status message. An `if-else if` inside the loop can handle this.
          
          This shows how loops and conditionals work together to create more complex behavior.
        </textarea>
      </section>
      
      <!-- Space Science Example - Code -->
      <section data-markdown>
        <textarea data-template>
          ## Launch Countdown: Code
          
          ```cpp
          #include <iostream>
          #include <chrono>
          #include <thread>

          int main() {
              for (int t = 10; t >= 0; --t) {
                  if (t == 10) {
                      std::cout << "T-" << t << ": Final systems check." << std::endl;
                  } else if (t == 3) {
                      std::cout << "T-" << t << ": Main engine start." << std::endl;
                  } else if (t == 0) {
                      std::cout << "LIFTOFF!" << std::endl;
                  } else {
                      std::cout << "T-" << t << "..." << std::endl;
                  }
                  // Pause for 1 second
                  std::this_thread::sleep_for(std::chrono::seconds(1));
              }
              return 0;
          }
          ```
        </textarea>
      </section>

      <!-- Common Pitfall 1 -->
      <section data-markdown>
        <textarea data-template>
          ## Common Pitfall: Infinite Loops
          
          A loop that never terminates. This will freeze your program!
          
          **Cause:** The loop's condition never becomes false.
          
          ```cpp
          // Pitfall 1: Forgetting the update step
          int i = 0;
          while (i < 10) {
              std::cout << "i is " << i << std::endl;
              // Oops! Forgot to increment i. It will always be 0.
              // i++;
          }
          
          // Pitfall 2: Wrong variable in a for loop
          for (int i = 0; i < 10; j++) { /* ... */ } // increments j, not i
          ```
          
          **Tip:** If your program seems to hang, suspect an infinite loop.
        </textarea>
      </section>
      
      <!-- Common Pitfall 2 -->
      <section data-markdown>
        <textarea data-template>
          ## Common Pitfall: Off-by-One Errors
          
          One of the most common bugs in programming. The loop runs one too many or one too few times.
          
          ```cpp
          // We want to loop 5 times (for indices 0, 1, 2, 3, 4)
          
          // Correct C++ idiom (0 to N-1)
          for (int i = 0; i < 5; ++i) {
              // Runs 5 times. i = 0, 1, 2, 3, 4
          }
          
          // WRONG: Runs 6 times!
          for (int i = 0; i <= 5; ++i) {
              // i = 0, 1, 2, 3, 4, 5
          }
          
          // Also Correct (but less common)
          for (int i = 1; i <= 5; ++i) {
              // Runs 5 times. i = 1, 2, 3, 4, 5
          }
          ```
        </textarea>
      </section>

      <!-- Common Pitfall 3 -->
      <section data-markdown>
        <textarea data-template>
          ## Common Pitfall: The Stray Semicolon
          
          A misplaced semicolon can create an empty loop body, leading to unexpected behavior.
          
          ```cpp
          // WRONG: Semicolon ends the for statement
          for (int i = 0; i < 10; i++);
          {
              // This block is NOT part of the loop!
              // It will only execute ONCE after the loop finishes.
              std::cout << "Hello!" << std::endl;
          }

          int x = 0;
          // Creates an infinite loop if x is not changed elsewhere
          while (x < 10); // The loop with an empty body runs forever
          {
              x++; // This is never reached
          }
          ```
        </textarea>
      </section>
      
      <!-- Choosing the Right Loop -->
      <section>
        <section>
            <h2>Choosing the Right Loop</h2>
            <p><strong><code>for</code> loop</strong></p>
            <ul class="fragment">
                <li><strong>Use when:</strong> You know the number of iterations in advance.</li>
                <li><strong>Keywords:</strong> "For each item...", "Do this N times", "Count from A to B".</li>
            </ul>
        </section>
        <section>
            <h2>Choosing the Right Loop</h2>
            <p><strong><code>while</code> loop</strong></p>
            <ul class="fragment">
                <li><strong>Use when:</strong> The number of iterations is unknown and depends on a condition. The loop might not run at all.</li>
                <li><strong>Keywords:</strong> "While this is true...", "Until this happens...".</li>
            </ul>
        </section>
        <section>
            <h2>Choosing the Right Loop</h2>
            <p><strong><code>do-while</code> loop</strong></p>
            <ul class="fragment">
                <li><strong>Use when:</strong> You need the loop body to execute at least once.</li>
                <li><strong>Keywords:</strong> "Get input and repeat if invalid", "Do this once, then check if we should do it again".</li>
            </ul>
        </section>
      </section>

      <!-- History Slide -->
      <section>
        <section>
          <h2>Historical Perspective: From <code>GOTO</code> to Structure</h2>
          <p><strong>Early Languages (FORTRAN, BASIC):</strong></p>
          <ul>
            <li>Loops were constructed with <code>IF</code> and <code>GOTO</code> statements.</li>
            <li><code>10 PRINT X</code></li>
            <li><code>20 X = X + 1</code></li>
            <li><code>30 IF X &lt; 100 GOTO 10</code></li>
          </ul>
        </section>
        <section>
          <p><strong>The Problem: "Spaghetti Code"</strong></p>
          <ul class="fragment">
            <li>Unrestricted <code>GOTO</code>s made logic incredibly hard to follow.</li>
            <li>Debugging was a nightmare.</li>
          </ul>
        </section>
        <section>
          <p><strong>The Solution: Structured Programming</strong></p>
          <ul class="fragment">
            <li>Languages like ALGOL and C introduced structured loops (<code>for</code>, <code>while</code>) with clear entry and exit points. This was a revolutionary step in software engineering.</li>
          </ul>
        </section>
      </section>
      
      <!-- Meme Slide -->
      <section>
        <h3>When your condition overflows</h3>
        <img src="memes/overflow.jpeg" alt="Genie Meme" style="height: 550px; border-radius: 10px;">
        <p><small>Sometimes Less is More.</small></p>
      </section>

      <!-- Meme Slide -->
      <section>
        <h3>Finding nemo</h3>
        <img src="memes/uparrow.jpeg" alt="Uparrow Meme" style="height: 550px; border-radius: 10px;">
        <p><small>History is finite, because time has a beginning(?).</small></p>
      </section>

      <!-- Summary -->
      <section>
        <h2>Summary</h2>
        <p><strong>Key Concepts:</strong></p>
        <ul>
          <li>Loops automate repetitive tasks.</li>
          <li><strong><code>for</code></strong>: For counting a known number of iterations.</li>
          <li><strong><code>while</code></strong>: For repeating based on a condition (may not run).</li>
          <li><strong><code>do-while</code></strong>: For repeating based on a condition (runs at least once).</li>
        </ul>
        </section>
         <section>
        <h2>Summary</h2>
        <p class="fragment"><strong>Remember the Pitfalls:</strong></p>
        <ul>
          <li class="fragment">Avoid infinite loops by ensuring the condition can become false.</li>
          <li class="fragment">Double-check your loop bounds (<code>&lt;</code> vs <code>&lt;=</code>) to prevent off-by-one errors.</li>
          <li class="fragment">Watch out for stray semicolons that terminate your loop statement prematurely.</li>
        </ul>
      </section>

      <!-- Questions -->
      <section data-markdown>
        <textarea data-template>
          ## Questions?
          
          **Next time:** Arrays and Data Structures
          
          ---
          
          *Practice writing each type of loop to solve a simple problem.*
        </textarea>
      </section>

    </div>
  </div>

  <!-- Reveal.js Core -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.js"></script>
  <!-- Plugins -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/markdown/markdown.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/highlight.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/math/math.js"></script>

  <script>
    Reveal.initialize({
      hash: true,
      plugins: [ RevealMarkdown, RevealHighlight, RevealMath.KaTeX ],
      katex: {
        displayMode: true,
        macros: { "\\cases": "\\begin{cases}#1\\end{cases}" }
      },
      margin: 0.1,
      minScale: 0.2,
      maxScale: 1.5,
      width: 1024,
      height: 768
    });
  </script>

  <script>
    // Theme switcher logic
    const themes = [
      'dracula', 'night', 'black', 'white', 'league', 'beige',
      'serif', 'simple', 'solarized', 'moon', 'sky', 'blood'
    ];
    let currentThemeIndex = 0;
    document.getElementById('theme-toggle').addEventListener('click', () => {
      currentThemeIndex = (currentThemeIndex + 1) % themes.length;
      document.getElementById('theme-link').href =
        `https://cdn.jsdelivr.net/npm/reveal.js@5/dist/theme/${themes[currentThemeIndex]}.css`;
    });
  </script>
</body>
</html>
